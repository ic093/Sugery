<form [formGroup]="addForm">
  <div class="container">
    <div class="row center">
      <div class="col-6 col-md-6 mt-5">
        <label for="patientId" class="text">病歷號:</label>
        <input
          type="text"
          id="patientId"
          class="form-control mb-3"
          placeholder="請輸入病歷號"
          formControlName="patientId"
        />
        <div
          *ngIf="
            addForm.get('patientId')?.invalid &&
            addForm.get('patientId')?.touched
          "
          class="text-danger"
        >
          <small *ngIf="addForm.get('patientId')?.errors?.['required']">
            請填病歷號。
          </small>
          <small *ngIf="addForm.get('patientId')?.errors?.['pattern']">
            病歷號只能輸入數字，且長度必須為8碼。
          </small>
        </div>
        <!-- 病患姓名 -->
        <label for="patientName" class="text">病患姓名:</label>
        <input
          type="text"
          id="patientName"
          class="form-control mb-3"
          placeholder="請輸入病患姓名"
          formControlName="patientName"
        />
        <div
          *ngIf="
            addForm.get('patientName')?.invalid &&
            addForm.get('patientName')?.touched
          "
          class="text-danger"
        >
          <small *ngIf="addForm.get('patientName')?.errors?.['required']"
            >請輸入病患姓名。</small
          >
        </div>
        <!-- 科別 -->
        <label for="speciality" class="text">科別:</label>
        <select
          id="speciality"
          class="form-select space"
          aria-label="Default select example"
          formControlName="speciality"
          (change)="onSpecialityChange()"
        >
          <option value="" disabled selected>請選擇</option>
          <option *ngFor="let speciality of specialities" [value]="speciality">
            {{ speciality }}
          </option>
        </select>
        <div
          *ngIf="addForm.get('speciality')?.errors?.['required'] && addForm.get('speciality')?.touched"
          class="text-danger"
        >
          <small *ngIf="addForm.get('speciality')?.errors?.['required']"
            >必填。</small
          >
        </div>
        <!-- 執刀醫師 -->
        <label for="doctor" class="text">執刀醫師:</label>
        <select
          id="doctor"
          class="form-select space"
          aria-label="Default select example"
          formControlName="doctor"
        >
          <option value="" disabled selected>請選擇</option>
          <option *ngFor="let doctor of doctors" [value]="doctor.doctor">
            {{ doctor.doctor }}
          </option>
        </select>
        <div
          *ngIf="addForm.get('doctor')?.errors?.['required'] && addForm.get('doctor')?.touched"
          class="text-danger"
        >
          <small *ngIf="addForm.get('doctor')?.errors?.['required']"
            >必填。</small
          >
        </div>
        <!-- 麻醉科醫師 -->
        <label for="Anesthesiologist" class="text">麻醉科醫師:</label>
        <select
          id="Anesthesiologist"
          class="form-select space"
          aria-label="Default select example"
          formControlName="Anesthesiologist"
        >
          <option value="" disabled selected>請選擇</option>
          <option *ngFor="let Anesth of Anesthesiologist" [value]="Anesth">
            {{ Anesth }}
          </option>
        </select>
        <div
          *ngIf="addForm.get('Anesthesiologist')?.errors?.['required'] && addForm.get('Anesthesiologist')?.touched"
          class="text-danger"
        >
          <small *ngIf="addForm.get('Anesthesiologist')?.errors?.['required']"
            >必填。</small
          >
        </div>
        <!-- 刷手護理師 -->
        <label for="ScrubNurse" class="text">刷手護理師:</label>
        <select
          id="ScrubNurse"
          class="form-select space"
          aria-label="Default select example"
          formControlName="ScrubNurse"
        >
          <option value="" disabled selected>請選擇</option>
          <option *ngFor="let scrubNurse of ScrubNurse" [value]="scrubNurse">
            {{ scrubNurse }}
          </option>
        </select>
        <div
          *ngIf="addForm.get('ScrubNurse')?.errors?.['required'] && addForm.get('ScrubNurse')?.touched"
          class="text-danger"
        >
          <small *ngIf="addForm.get('ScrubNurse')?.errors?.['required']"
            >必填。</small
          >
        </div>
        <!-- 術式 -->
        <label for="procedure" class="text">術式:</label>
        <input
          type="text"
          id="procedure"
          class="form-control mb-3"
          placeholder="請輸入術式"
          formControlName="procedure"
        />
        <div
          *ngIf="addForm.get('procedure')?.errors?.['required'] && addForm.get('procedure')?.touched"
          class="text-danger"
        >
          <small *ngIf="addForm.get('procedure')?.errors?.['required']"
            >必填。</small
          >
        </div>
        <!-- 預計開始手術時間 -->
        <label for="StartTime" class="text">預計手術開始時間:</label>
        <input
          type="datetime-local"
          id="StartTime"
          class="form-control space"
          aria-label="預計手術時間"
          formControlName="StartTime"
        />
        <div
          *ngIf="addForm.get('StartTime')?.errors?.['required'] && addForm.get('StartTime')?.touched"
          class="text-danger"
        >
          <small *ngIf="addForm.get('StartTime')?.errors?.['required']"
            >必填。</small
          >
        </div>
        <!-- 預計手術結束時間 -->
        <label for="EndTime" class="text">預計手術結束時間:</label>
        <input
          type="datetime-local"
          id="EndTime"
          class="form-control space"
          aria-label="預計手術時間"
          formControlName="EndTime"
        />
        <div
          *ngIf="addForm.get('EndTime')?.errors?.['required'] && addForm.get('EndTime')?.touched"
          class="text-danger"
        >
          <small *ngIf="addForm.get('EndTime')?.errors?.['required']"
            >必填。</small
          >
        </div>
        <div class="center mb-5">
          <button
            type="button"
            class="btn btn-warning"
            [disabled]="addForm.invalid"
            (click)="submitForm()"
          >
            確定新增
          </button>
        </div>
      </div>
    </div>
  </div>
</form>
